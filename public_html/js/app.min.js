"use strict";function is_null(t){return null==t}function is_undefined(t){return"undefined"==typeof t}function goPage(t){window.location.href=t}function lockScroll(t){}function yandexMap(){ymaps.ready(function(){var t,e,i=$(window).width()<=667;t=new ymaps.Map("location-map",{center:[45.021188,38.926667],zoom:16,controls:["zoomControl","fullscreenControl"]}),t.behaviors.disable("multiTouch"),t.behaviors.disable("scrollZoom"),t.controls.get("zoomControl").options.set("size","small"),t.controls.get("zoomControl").options.set("position",{right:10,top:50}),i&&t.behaviors.disable("drag"),e=new ymaps.Placemark(t.getCenter(),{},{iconLayout:"default#image",iconImageHref:"/images/vinograd-logo.png",iconImageSize:[141,141],iconImageOffset:[-71,-71]}),t.geoObjects.add(e)})}!function(t){t.app={initSandwich:function(){t.app.sandwich.init({keyHooks:!0,selector:".js-sandwich-menu",wrapper:".layout-wrapper",overlay:"#menu-overlay"})},initMask:function(){t(".j-phone-mask").mask("+7 (999) 999-99-99")},initPopup:function(){t.popup.init(".js-open-popup",{cssPosition:!1,wrapper:".layout-wrapper"})},initDocuments:function(){t("body").on("click",".j-load-documents",function(e){var i=t(this).data("motion");"show"==i?(t(this).data("motion","hide"),t("#documents").find(".is-motion").removeClass("is-hidden")):(t(this).data("motion","show"),t("html, body").stop().animate({scrollTop:t("#documents-anchor").offset().top},"fast"),setTimeout(function(){t("#documents").find(".is-motion").addClass("is-hidden")},200)),t(this).closest(".page-button").toggleClass("_down").toggleClass("_up")})},initBlock:function(e){var i={type:"image",preloader:!0,delegate:"a.zoom",closeOnContentClick:!0,closeBtnInside:!0,fixedContentPos:!0,fixedBgPos:!1,verticalFit:!1,image:{verticalFit:!0},zoom:{enabled:!1}};t(window).width()>=768&&(i.gallery={enabled:!0}),t(e).magnificPopup(i)},initZoomDefault:function(){t(".zoom-image").magnificPopup({type:"image"})},initZoom:function(){this.initBlock(".j-gallery"),this.initBlock(".j-timeline"),this.initBlock(".j-documents"),this.initBlock(".j-floors"),this.initBlock(".j-plans")},initTabs:function(){t("body").on("click",".j-tab",function(e){if(e.preventDefault(),!t(this).hasClass("current")){var i=t(this).attr("href").substr(2),n=t(this).data("wrapper");if(t(this).closest(".j-tab-closest").find(".current").removeClass("current"),t("#tab-"+n).length){var o=t("#tab-"+n).find(".is-item");o.removeClass("is-show"),o.filter("."+i).addClass("is-show")}t(this).addClass("current");var a=t(this).closest(".j-tabs-cover"),s=a.find(".j-tabs-content");s.hasClass("active")&&(s.removeClass("animate"),setTimeout(function(){s.removeClass("active")},300))}return!1}),t("body").on("click",".j-tabs-trigger",function(){var e=t(this).closest(".j-tabs-cover");if(e.length){var i=e.find(".j-tabs-content");i.hasClass("active")?(i.removeClass("animate"),setTimeout(function(){i.removeClass("active")},300)):(i.addClass("active"),setTimeout(function(){i.addClass("animate")},10))}})},initSlider:function(){t(".j-slider").slick({dots:!1,infinite:!0,draggable:!0,fade:!0,speed:700,slidesToShow:1,slidesToScroll:1,prevArrow:'<button type="button" class="about__slider__navi _prev slick-prev"></button>',nextArrow:'<button type="button" class="about__slider__navi _next slick-next"></button>'})},initSwitcher:function(){function e(){return clearInterval(a),setInterval(function(){t("#slider-next").trigger("click")},o)}function i(t){clearInterval(t)}var n=t("#slider"),o=6e3,a=null;t("body").on("change",".j-switcher",function(){var e=t(this).val();n.find(".j-slider-item._active").addClass("_last-active"),n.find(".j-slider-item._active").removeClass("_active"),n.find(".j-slider-item").filter('[data-daytime="'+e+'"]').addClass("_active"),setTimeout(function(){n.find(".j-slider-item._last-active").removeClass("_last-active")},1e3)}),a=e(),t("body").on("click",".j-slider-navigation",function(){var o=t(this).data("direction");i(a);var s=n.find(".j-slider-item._active"),r=s.find(".j-slider-image").length-1,l=s.find(".j-slider-image._active").index(),c=0;"prev"==o?c=l-1:"next"==o&&(c=l+1),c>r&&(c=0),c<0&&(c=r),s.find(".j-slider-image._active").addClass("_last-active"),s.find(".j-slider-image._active").removeClass("_active"),s.find(".j-slider-image").eq(c).addClass("_active"),setTimeout(function(){s.find(".j-slider-image._last-active").removeClass("_last-active"),a=e()},1e3)})},initPlans:function(){var e=null;t("body").on("click",".j-plans-layout",function(i){i.preventDefault();var n=t(this).attr("href"),o=t(this).attr("title");return e=t(template("tmpl-popup-layout",{title:o,image:n})),e.addClass("temp"),t("body").append(e),t.popup.show(e,!1,!0),!1})},initLocation:function(){var e=t("#location-mobile"),i=null,n=0;e.find(".j-close").on("click",function(){e.addClass("is-disabled"),i=e.find(".j-content"),i.removeClass("_animate"),setTimeout(function(){i.removeClass("_active"),e.addClass("is-hidden").removeClass("is-disabled")},300)}),t("body").on("click",".j-loc-flag",function(){e.removeClass("is-hidden"),i=e.find(".j-content"),i.find(".j-content-middle").html(t(this).closest(".location__item").find(".location__item__content").html()),i.addClass("_active"),n=t(this).data("number"),e.removeClass("_num-1 _num-2 _num-3 _num-4 _num-5 _num-6").addClass("_num-"+n),setTimeout(function(){i.addClass("_animate")},10)})},initClose:function(){t(".banner.show").click(function(){if(t("#banner-10m").length){var e=t("#banner-10m");e.hasClass("show")&&(e.removeClass("animate"),setTimeout(function(){e.removeClass("show")},300))}})},initBanner:function(e){var i=this;if(t("#banner-10m").length){var n=t("#banner-10m");setTimeout(function(){n.addClass("show"),setTimeout(function(){n.addClass("animate")},10),i.initClose()},1e3*e)}},initPorch:function(){var e="",i="";t("body").on("click",".j-porch-tab",function(e){if(e.preventDefault(),!t(this).hasClass("_current")){var i=t(this).closest(".j-porch"),n=t(this).data("tab");i.find("._current").removeClass("_current"),i.find(".j-porch-item._active").removeClass("_active"),i.find("#porch-tab-"+n).addClass("_active"),t(this).addClass("_current")}return!1}),t(".j-area-item").on("mouseenter",function(i){e=t(this).data("element"),t(e).length&&t(e).addClass("_show")}),t(".j-area-item").on("mouseleave",function(i){e=t(this).data("element"),t(e).length&&t(e).removeClass("_show")}),t(".j-area-item").on("click",function(e){return e.preventDefault(),i=t(this).attr("href"),!1})},initGoals:function(){t("body").on("click",".j-yandex-goal",function(){t(this).data("target-name")&&t.each(t(this).data("target-name").split(" "),function(e,i){yaCounter38867515.reachGoal(t.trim(i))})})},initShow:function(){t("body").on("click",".j-show",function(e){e.preventDefault();var i=t(this).attr("href");return t(i).length&&t(i).addClass("is-show"),t(this).hide(),!1})},initFancybox:function(){t(".j-pinch-trigger").fancybox({transition:"none",autoPlay:!1,helpers:{buttons:{},title:{type:"inside"}}});for(var e,i=[".j-gallery",".j-timeline",".j-documents",".j-floors",".j-plans"],n="",o=i.length-1;o>=0;o--)n=Math.random(),e=t(i[o]).find(".zoom"),e.prop("rel","gallery-"+n),e.fancybox({rel:"gallery-"+n,transition:"none",slideshow:!0,width:"650px",height:"650px"})},timeline:{data:{},filter:null,years:null,months:null,_initCarousel:function(){var e=t(window).width(),i=t("#timeline-carousel").find(".slick-slide").length;(e>768&&i>=4||e>568&&i>=3||e>375&&i>=2||e<375&&i>=1)&&t("#timeline-carousel").slick({lazyLoad:"ondemand",dots:!1,infinite:!0,draggable:!0,speed:259,slidesToShow:4,slidesToScroll:1,prevArrow:'<button type="button" class="carousel__navigation _prev slick-prev"></button>',nextArrow:'<button type="button" class="carousel__navigation _next slick-next"></button>',responsive:[{breakpoint:768,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:568,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:375,settings:{fade:!0,slidesToShow:1,slidesToScroll:1}}]})},_currentYear:function(){return parseInt(this.years.find(".is-current").data("value"))},_currentMonth:function(){return parseInt(this.months.find(".is-current").data("value"))},_handle:function(){var e=this;this.data.current=this._currentYear(),this.data.months=[],this.months.find(".j-timeline-months-item").each(function(i,n){var o=[],a=t(n).data("if");"undefined"!=typeof a&&""!==a&&(o=parseInt(a)),e.data.months.push({item:n,year:o})})},_reinitCarousel:function(){var e=this,i=this._currentYear(),n=this._currentMonth();t("#timeline-carousel").hasClass("slick-initialized")&&t("#timeline-carousel").slick("unslick"),t("#timeline-carousel").html("");var o=t("#timeline-cache").find(".carousel__item.is-year-"+i+".is-month-"+n).length;t("#timeline-cache").find(".carousel__item.is-year-"+i+".is-month-"+n).each(function(i,n){t("#timeline-carousel").append(t(this).clone()),i+1==o&&setTimeout(function(){e._initCarousel()},50)})},_changeFirstMonth:function(){this.months.find(".j-timeline-months-item.is-active:first").trigger("click")},_match:function(){var e=this;this._handle(),this.months.find(".j-timeline-months-item").removeClass("is-active"),t.each(this.data.months,function(i,n){n.year==e.data.current&&t(n.item).addClass("is-active")}),this.filter.addClass("is-active")},_events:function(){var e=this;this.years.find(".j-timeline-years-item").on("click",function(i){i.preventDefault(),t(this).hasClass("is-current")||(t("#timeline-filter").find(".j-timeline-years").find(".is-current").removeClass("is-current"),t(this).addClass("is-current"),e._match(),e._changeFirstMonth(),e._reinitCarousel())}),this.months.find(".j-timeline-months-item").on("click",function(i){i.preventDefault(),t(this).hasClass("is-current")||(t("#timeline-filter").find(".j-timeline-months").find(".is-current").removeClass("is-current"),t(this).addClass("is-current"),e._match(),e._reinitCarousel())})},init:function(){this.filter=t("#timeline-filter"),this.years=this.filter.find(".j-timeline-years"),this.months=this.filter.find(".j-timeline-months"),this._match(),this._events(),this._reinitCarousel()}},init:function(){t.app.layzr.init(),this.timeline.init(),this.initGoals(),this.initShow(),this.initPorch(),this.initTabs(),this.initZoomDefault(),this.initPlans(),this.initPopup(),this.initSlider(),this.initFancybox(),this.initSandwich(),this.initSwitcher(),this.initLocation(),this.initDocuments()}}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){t.app=t.app=t.app||{};var e,i=t("body");t.app.ajaxForm={config:{form_class:".form-ajax",form_reset:"form-reset",link_class:".js-request-link",error_class:"error",error_message:"form__error-message",error_message_class:"j-error-message",error_message_addclass:"show",form_label:".form__wrapper",checkbox_label:"checkbox__label"},callback_stack:{},extend:function(t){if(e=this,"undefined"!=typeof t){var i;for(i in t)"undefined"!=typeof e.config[i]&&(e.config[i]=t[i])}},default_handler:function(i,n){if(e=this,n.status)n.hasOwnProperty("redirect_url")&&(window.location.href=n.redirect_url);else if("undefined"!=typeof n.errors||"undefined"!=typeof n.error_message){var o,a;"undefined"!=typeof n.errors&&(o=n.errors),"undefined"!=typeof n.error_message&&(a=n.error_message),e.validation(i,o,n.error_message)}n.hasOwnProperty("open_popup")&&(t("body").find(".popup.is-open").length?t.popup.close(t("body").find(".popup.is-open"),function(){t.popup.open(n.open_popup)}):t.popup.open(n.open_popup)),n.hasOwnProperty("message")&&t.popup.message(n.title,n.message)},validation:function(t,i,n){e=this,t.find("."+e.config.error_class).removeClass(e.config.error_class),t.find("."+e.config.error_message).remove(),t.find("."+e.config.error_message_class).removeClass(e.config.error_message_addclass);var o,a;setTimeout(function(){if("undefined"!=typeof n&&""!==n&&(t.find("."+e.config.error_message_class).html(n),t.find("."+e.config.error_message_class).addClass(e.config.error_message_addclass)),"undefined"!=typeof i&&""!==i)for(o in i)t.find('input[name="'+o+'"]').length>0&&(a=t.find('input[name="'+o+'"]')),t.find('select[name="'+o+'"]').length>0&&(a=t.find('select[name="'+o+'"]')),t.find('textarea[name="'+o+'"]').length>0&&(a=t.find('textarea[name="'+o+'"]')),a.closest("."+e.config.checkbox_label).length>0&&(a=a.closest("."+e.config.checkbox_label)),"undefined"!=typeof a&&(a.addClass(e.config.error_class),a.closest(e.config.form_label).append('<div class="'+e.config.error_message+'">'+i[o]+"</div>"))},10)},upload:function(){e=this,i.on("submit",".form-file-upload",function(t){return AIM.submit(this,{onStart:function(){},onComplete:function(t){"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t.status===!0&&t.hasOwnProperty("photo_url")}})}),t(document).on("change",".upload_button_onchange",function(){t(this).closest(".upload_button").find(".upload_button_field").length>0&&t(this).closest(".upload_button").find(".upload_button_field").html(t(this).val())})},send:function(e,i,n,o,a){"function"!=typeof o&&(o=function(){}),"function"!=typeof a&&(a=function(){});try{t.ajax({url:e,type:i,data:n,contentType:!1,processData:"get"==i.toLowerCase(),success:o,error:a,dataType:"JSON"})}catch(t){}},initLink:function(){e=this,i.on("click",e.config.link_class,function(i){i.preventDefault?i.preventDefault():i.returnValue=!1;var n=t(this);if(!n.data("is-busy")){n.data("is-busy",!0);var o=t(this).attr("href")||t(this).data("action"),a=t(this).data("method")||"get",s={};e.send(o,a,s,function(t){n.data("callback")&&e.callback_stack.hasOwnProperty(n.data("callback"))?e.callback_stack[n.data("callback")](n,t):e.default_handler(n,t),t.status===!0,n.data("is-busy",!1)},function(t){e.default_handler(n,t),n.data("is-busy",!1)})}})},initForm:function(){e=this,i.on("submit",e.config.form_class,function(i){i.preventDefault?i.preventDefault():i.returnValue=!1;var n=t(this),o=n.attr("action"),a=n.attr("method")||"post",s=window.FormData?new FormData(n[0]):n.serialize();if(!n.data("is-busy"))return n.data("is-busy",!0),"undefined"!=typeof button&&(button.data("loading")&&(button.data("original",button.text()),button.text(button.data("loading"))),button.addClass("preload")),!(n.data("precallback")&&e.callback_stack.hasOwnProperty(n.data("precallback"))&&!e.callback_stack[n.data("precallback")](n))&&void e.send(o,a,s,function(t){n.data("callback")&&e.callback_stack.hasOwnProperty(n.data("callback"))?e.callback_stack[n.data("callback")](n,t):e.default_handler(n,t),t.status===!0&&n.hasClass(e.config.form_reset)&&(n.find("."+e.config.error_class).removeClass(e.config.error_class),n.get(0).reset()),"undefined"!=typeof button&&(button.data("original")&&button.text(button.data("original")),button.removeClass("preload")),n.data("is-busy",!1)},function(t){e.default_handler(n,t),n.data("is-busy",!1)})})},init:function(t){this.extend(t),this.initForm(),this.initLink()}},t.app.ajaxForm.init()}(jQuery),function(t){t.app=t.app||{},t.app.layzr={init:function(e){t(window).lazyLoadXT({edgeY:200,srcAttr:"data-src"})}}}(jQuery),function(t){var e;t.app=t.app||{},t.app.pinchzoom={pinch:function(t){t.find(".j-pinch-zoom").length&&new RTP.PinchZoom(t.find(".j-pinch-zoom"),{tapZoomFactor:3,minZoom:.5,maxZoom:10,lockDragAxis:!0})},trigger:function(){e=this;var i,n;t("body").on("click",".j-pinch-trigger",function(o){return o.preventDefault(),i=t(this).attr("href"),n=t(template("tmpl-popup-pinch",{image:i})),n.addClass("temp"),t("body").append(n),t.popup.show(n),e.pinch(n),!1})},init:function(t){this.trigger()}}}(jQuery),function(t){var e;t.app=t.app||{},t.app.sandwich={config:{keyHooks:!1,selector:".js-sandwich-menu",wrapper:".layout-wrapper",overlay:".overlay"},extend:function(t){if(e=this,"undefined"!=typeof t){var i;for(i in t)"undefined"!=typeof e.config[i]&&(e.config[i]=t[i])}},isOpen:function(){return t("body").hasClass("page-visible")},hide:function(){t("body").removeClass("page-open"),setTimeout(function(){t("body").removeClass("page-visible")},10),t(this.config.overlay).css({visibility:"hidden"})},toggle:function(){t("body").hasClass("page-visible")?setTimeout(function(){t("body").removeClass("page-visible")},10):setTimeout(function(){t("body").addClass("page-visible")},10),t("body").toggleClass("page-open");var i="visible";t("body").hasClass("page-open")||(i="hidden"),t(e.config.overlay).css({visibility:i})},sandwichTrigger:function(){e=this,e.config.keyHooks&&t("body").on("keydown",function(t){27==t.keyCode&&e.isOpen()&&e.toggle()}),t("body").on("click",e.config.selector,function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,e.toggle()})},overlayTrigger:function(){e=this,t("body").on("click",e.config.overlay,function(t){e.hide()})},init:function(t){this.extend(t),this.sandwichTrigger(),this.overlayTrigger()}}}(jQuery),function(t){var e,i,n,o,a,s,r,l,c=t("#navigation"),d=t("html, body"),u=t(window).width()<=667;l=t(".j-section").map(function(){return{offset:t(this).offset().top-115,element:t(this)}}),n=function(i){s=null,l.map(function(){e=t(this)[0],e.offset<i&&(s=e.element)}),null!==s&&s.attr("id")&&(r=c.find('.j-navigation[href="#'+s.attr("id").split("-")[0]+'-section"]'),r.hasClass("current")||(c.find(".j-navigation.current").removeClass("current"),r.addClass("current")))},o=function(e,n){e=e.replace("-section","").split("?")[0],a=t(e+"-anchor"),a.length&&(i=a.offset().top-95,u=t(window).width()<=667,n?d.stop().animate({scrollTop:i},"medium",function(){c.removeClass("is-disabled")}):d.scrollTop(i))},t("body").on("click",".j-navigation",function(t){c.addClass("is-disabled"),o(this.hash,!0)}),setTimeout(function(){window.location.hash.length>1&&(c.addClass("is-disabled"),o(window.location.hash,!1))},50),t(window).scroll(function(){n(t(window).scrollTop())})}(jQuery),$(document).ready(function(){$.app.init()});
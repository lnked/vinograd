"use strict";

function is_null(x)
{
    return x == null;
}

function is_undefined(x)
{
    return typeof(x) == 'undefined';
}

function goPage(sPage) { window.location.href = sPage; }

function lockScroll(element) {
    var lockX, lockY, events = ['scroll', 'mousewheel', 'touchmove'], keys = {37: 1, 38: 1, 39: 1, 40: 1};

    function preventDefault(e) {
        e = e || window.event;
        if (e.preventDefault)
          e.preventDefault();
        e.returnValue = false;  
    }

    function preventDefaultForScrollKeys(e) {
        if (keys[e.keyCode]) {
            preventDefault(e);
            return false;
        }
    }

    function disableScroll() {
        if (window.addEventListener) // older FF
            window.addEventListener('DOMMouseScroll', preventDefault, false);
        window.onwheel = preventDefault; // modern standard
        window.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE
        window.ontouchmove  = preventDefault; // mobile
        document.onkeydown  = preventDefaultForScrollKeys;
    }

    function enableScroll() {
        if (window.removeEventListener)
            window.removeEventListener('DOMMouseScroll', preventDefault, false);
        window.onmousewheel = document.onmousewheel = null; 
        window.onwheel = null; 
        window.ontouchmove = null;  
        document.onkeydown = null;  
    }
}
(function($) {
    "use strict";

    var that, top, changeItem, scrollToAnchor, $target, $element, $current, $navigationMap, $navigation = $('#navigation'), $hasScroll = $('html, body');
    var is_mobile = $(window).width() <= 667;

    $navigationMap = $('.j-section').map(function(){
        return {
            offset: $(this).offset().top - 115,
            element: $(this)
        }
    });

    changeItem = function(scrollTop) {
        $element = null;

        $navigationMap.map(function(){
            that = $(this)[0];
            if (that.offset < scrollTop) {
                $element = that.element; 
            }
        })

        if ($element !== null && $element.attr('id')) {
           
            $current = $navigation.find('.j-navigation[href="#' + $element.attr('id').split('-')[0] + '-section"]');

            if (!$current.hasClass('current')) {
                $navigation.find('.j-navigation.current').removeClass('current');
                $current.addClass('current');
            }
        }
    }

    scrollToAnchor = function(hash, animate) {
        hash = hash.replace('-section', '');
        $target = $(hash + '-anchor');

        if ($target.length)
        {
            top = $target.offset().top - 95;
            is_mobile = $(window).width() <= 667;

            if (animate) {
                $hasScroll.stop().animate({ 'scrollTop': top }, 'medium', function(){
                    $navigation.removeClass('is-disabled');
                });
            }
            else {
                $hasScroll.scrollTop(top);
            }
        }
    }

    $('body').on('click', '.j-navigation', function(e) {
        $navigation.addClass('is-disabled');
        scrollToAnchor(this.hash, true);
    });

    setTimeout(function(){
        if (window.location.hash.length > 1) {
            $navigation.addClass('is-disabled');
            scrollToAnchor(window.location.hash, true);
        }
    }, 50);

    $(window).scroll(function(){
        changeItem($(window).scrollTop())
    });
})(jQuery);
function yandexMap() {
    ymaps.ready(function () {
        var YMap, myPlacemark;
        
        YMap = new ymaps.Map('location-map', {
            center: [45.030203, 38.940457],
            zoom: 16,
            controls: ['zoomControl', 'fullscreenControl']
        });

        YMap.behaviors.disable('scrollZoom');
        YMap.controls.get('zoomControl').options.set('size', 'small');
        YMap.controls.get('zoomControl').options.set('position', { right: 10, top: 50 });

        myPlacemark = new ymaps.Placemark(YMap.getCenter(), {}, {
            iconLayout: 'default#image',
            iconImageHref: '/images/vinograd-logo.png',
            iconImageSize: [141, 141],
            iconImageOffset: [-71, -71]
        });

        YMap.geoObjects.add(myPlacemark);
    });
}
(function(body){
    "use strict";

    var app = {

        initMask: function() {
            $(".j-phone-mask").mask("+7 (999) 999-99-99");
        },

        initPopup: function()
        {
            $.popup.init('.js-open-popup', {
                cssPosition: false,
                wrapper: '.layout-wrapper'
            });
        },

        initDocuments: function() {
            $('body').on('click', '.j-load-documents', function(e) {
                var motion = $(this).data('motion');

                if (motion == 'show') {
                    $(this).data('motion', 'hide');
                    $('#documents').find('.is-motion').removeClass('is-hidden');
                }
                else {
                    $(this).data('motion', 'show');

                    $('html, body').stop().animate({ 'scrollTop': $('#documents-anchor').offset().top }, 'fast');

                    setTimeout(function(){
                        $('#documents').find('.is-motion').addClass('is-hidden');
                    }, 200);
                }

                $(this).closest('.page-button').toggleClass('_down').toggleClass('_up');
            });
        },

        initBlock: function (selector) {
            $(selector).magnificPopup({
                type: 'image',
                delegate: 'a.zoom',
                closeOnContentClick: true,
                closeBtnInside: false,
                fixedContentPos: true,
                mainClass: 'mfp-no-margins mfp-with-zoom',
                image: {
                    verticalFit: true
                },
                gallery: {
                    enabled:true
                }
            });
        },

        initZoom: function () {

            this.initBlock('.j-gallery');
            this.initBlock('.j-timeline');
            this.initBlock('.j-documents');
            
        },

        initTabs: function() {
            $('body').on('click', '.j-tab', function(e) {
                e.preventDefault();

                if (!$(this).hasClass('current')) {
                    var tab = $(this).attr('href').substr(2),
                        wrapper = $(this).data('wrapper');

                    $(this).closest('.j-tab-closest').find('.current').removeClass('current');

                    if ($('#tab-' + wrapper).length) {
                        var $items = $('#tab-' + wrapper).find('.is-item');

                        $items.removeClass('is-show');
                        $items.filter('.' + tab).addClass('is-show');
                    }

                    $(this).addClass('current');
                }
                
                return !1;
            });
        },

        initCarousel: function() {

            $('.j-carousel').slick({
                dots: false,
                infinite: true,
                draggable: true,
                speed: 259,
                slidesToShow: 4,
                slidesToScroll: 1,
                prevArrow: '<button type="button" class="carousel__navigation _prev slick-prev"></button>',
                nextArrow: '<button type="button" class="carousel__navigation _next slick-next"></button>',
                responsive: [
                    {
                        breakpoint: 1024,
                        settings: {
                            slidesToShow: 3,
                            slidesToScroll: 3,
                            infinite: true,
                            dots: true
                        }
                    },
                    {
                        breakpoint: 600,
                        settings: {
                            slidesToShow: 2,
                            slidesToScroll: 2
                        }
                    },
                    {
                        breakpoint: 480,
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1
                        }
                    }
                ]
            });

        },

        initSlider: function() {

            $('.j-slider').slick({
                dots: false,
                infinite: true,
                draggable: true,
                fade: true,
                speed: 700,
                slidesToShow: 1,
                slidesToScroll: 1,
                prevArrow: '<button type="button" class="about__slider__navi _prev slick-prev"></button>',
                nextArrow: '<button type="button" class="about__slider__navi _next slick-next"></button>'
            });

        },

        initSwitcher: function() {
            var $slider = $('#slider'), timeout = 6000;

            $('body').on('change', '.j-switcher', function(){
                var daytime = $(this).val();
                $slider.find('.j-slider-item._active').addClass('_last-active');

                $slider.find('.j-slider-item._active').removeClass('_active');
                $slider.find('.j-slider-item').filter('[data-daytime="' + daytime + '"]').addClass('_active');

                setTimeout(function(){
                    $slider.find('.j-slider-item._last-active').removeClass('_last-active');
                }, 1000);
            });

            $('body').on('click', '.j-slider-navigation', function(){
                var direction = $(this).data('direction');

                var $group = $slider.find('.j-slider-item._active'),
                    _count = $group.find('.j-slider-image').length - 1,
                    _index = $group.find('.j-slider-image._active').index(),
                    _next = 0;

                if (direction == 'prev') {
                    _next = _index - 1;
                }
                else if (direction == 'next') {
                    _next = _index + 1;
                }

                if (_next > _count) {
                    _next = 0;
                }
                
                if (_next < 0) {
                    _next = _count;
                }

                $group.find('.j-slider-image._active').addClass('_last-active');
                $group.find('.j-slider-image._active').removeClass('_active');
                $group.find('.j-slider-image').eq(_next).addClass('_active');

                setTimeout(function(){
                    $group.find('.j-slider-image._last-active').removeClass('_last-active');
                }, 1000);
            });

            setInterval(function(){
                $('#slider-next').trigger('click');
            }, timeout);
        },

        initPlans: function() {
            var $popup = null;

            $('body').on('click', '.j-plans-layout', function(e){
                e.preventDefault();
                
                var image = $(this).attr('href'),
                    title = $(this).attr('title');

                $popup = $(template('tmpl-popup-layout', {
                    'title': title,
                    'image': image
                }));

                $popup.addClass('temp');
                
                $('body').append($popup);
                
                $.popup.show($popup, false, true);

                return !1;
            });
        },

        init: function() {
            this.initMask();
            this.initTabs();
            this.initZoom();
            this.initPlans();
            this.initPopup();
            this.initSlider();
            this.initSwitcher();
            this.initCarousel();
            this.initDocuments();
        }
    };

    app.init();
})(document.body);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9mdW5jdGlvbnMuanMiLCJfbmF2aWdhdGlvbi5qcyIsIl95YW5kZXgubWFwLmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIGlzX251bGwoeClcbntcbiAgICByZXR1cm4geCA9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc191bmRlZmluZWQoeClcbntcbiAgICByZXR1cm4gdHlwZW9mKHgpID09ICd1bmRlZmluZWQnO1xufVxuXG5mdW5jdGlvbiBnb1BhZ2Uoc1BhZ2UpIHsgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBzUGFnZTsgfVxuXG5mdW5jdGlvbiBsb2NrU2Nyb2xsKGVsZW1lbnQpIHtcbiAgICB2YXIgbG9ja1gsIGxvY2tZLCBldmVudHMgPSBbJ3Njcm9sbCcsICdtb3VzZXdoZWVsJywgJ3RvdWNobW92ZSddLCBrZXlzID0gezM3OiAxLCAzODogMSwgMzk6IDEsIDQwOiAxfTtcblxuICAgIGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGUpIHtcbiAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdClcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0Rm9yU2Nyb2xsS2V5cyhlKSB7XG4gICAgICAgIGlmIChrZXlzW2Uua2V5Q29kZV0pIHtcbiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzYWJsZVNjcm9sbCgpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSAvLyBvbGRlciBGRlxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU1vdXNlU2Nyb2xsJywgcHJldmVudERlZmF1bHQsIGZhbHNlKTtcbiAgICAgICAgd2luZG93Lm9ud2hlZWwgPSBwcmV2ZW50RGVmYXVsdDsgLy8gbW9kZXJuIHN0YW5kYXJkXG4gICAgICAgIHdpbmRvdy5vbm1vdXNld2hlZWwgPSBkb2N1bWVudC5vbm1vdXNld2hlZWwgPSBwcmV2ZW50RGVmYXVsdDsgLy8gb2xkZXIgYnJvd3NlcnMsIElFXG4gICAgICAgIHdpbmRvdy5vbnRvdWNobW92ZSAgPSBwcmV2ZW50RGVmYXVsdDsgLy8gbW9iaWxlXG4gICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93biAgPSBwcmV2ZW50RGVmYXVsdEZvclNjcm9sbEtleXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5hYmxlU2Nyb2xsKCkge1xuICAgICAgICBpZiAod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIpXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xuICAgICAgICB3aW5kb3cub25tb3VzZXdoZWVsID0gZG9jdW1lbnQub25tb3VzZXdoZWVsID0gbnVsbDsgXG4gICAgICAgIHdpbmRvdy5vbndoZWVsID0gbnVsbDsgXG4gICAgICAgIHdpbmRvdy5vbnRvdWNobW92ZSA9IG51bGw7ICBcbiAgICAgICAgZG9jdW1lbnQub25rZXlkb3duID0gbnVsbDsgIFxuICAgIH1cbn0iLCIoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHRoYXQsIHRvcCwgY2hhbmdlSXRlbSwgc2Nyb2xsVG9BbmNob3IsICR0YXJnZXQsICRlbGVtZW50LCAkY3VycmVudCwgJG5hdmlnYXRpb25NYXAsICRuYXZpZ2F0aW9uID0gJCgnI25hdmlnYXRpb24nKSwgJGhhc1Njcm9sbCA9ICQoJ2h0bWwsIGJvZHknKTtcbiAgICB2YXIgaXNfbW9iaWxlID0gJCh3aW5kb3cpLndpZHRoKCkgPD0gNjY3O1xuXG4gICAgJG5hdmlnYXRpb25NYXAgPSAkKCcuai1zZWN0aW9uJykubWFwKGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvZmZzZXQ6ICQodGhpcykub2Zmc2V0KCkudG9wIC0gMTE1LFxuICAgICAgICAgICAgZWxlbWVudDogJCh0aGlzKVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBjaGFuZ2VJdGVtID0gZnVuY3Rpb24oc2Nyb2xsVG9wKSB7XG4gICAgICAgICRlbGVtZW50ID0gbnVsbDtcblxuICAgICAgICAkbmF2aWdhdGlvbk1hcC5tYXAoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHRoYXQgPSAkKHRoaXMpWzBdO1xuICAgICAgICAgICAgaWYgKHRoYXQub2Zmc2V0IDwgc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAgICAgJGVsZW1lbnQgPSB0aGF0LmVsZW1lbnQ7IFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICgkZWxlbWVudCAhPT0gbnVsbCAmJiAkZWxlbWVudC5hdHRyKCdpZCcpKSB7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgJGN1cnJlbnQgPSAkbmF2aWdhdGlvbi5maW5kKCcuai1uYXZpZ2F0aW9uW2hyZWY9XCIjJyArICRlbGVtZW50LmF0dHIoJ2lkJykuc3BsaXQoJy0nKVswXSArICctc2VjdGlvblwiXScpO1xuXG4gICAgICAgICAgICBpZiAoISRjdXJyZW50Lmhhc0NsYXNzKCdjdXJyZW50JykpIHtcbiAgICAgICAgICAgICAgICAkbmF2aWdhdGlvbi5maW5kKCcuai1uYXZpZ2F0aW9uLmN1cnJlbnQnKS5yZW1vdmVDbGFzcygnY3VycmVudCcpO1xuICAgICAgICAgICAgICAgICRjdXJyZW50LmFkZENsYXNzKCdjdXJyZW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzY3JvbGxUb0FuY2hvciA9IGZ1bmN0aW9uKGhhc2gsIGFuaW1hdGUpIHtcbiAgICAgICAgaGFzaCA9IGhhc2gucmVwbGFjZSgnLXNlY3Rpb24nLCAnJyk7XG4gICAgICAgICR0YXJnZXQgPSAkKGhhc2ggKyAnLWFuY2hvcicpO1xuXG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aClcbiAgICAgICAge1xuICAgICAgICAgICAgdG9wID0gJHRhcmdldC5vZmZzZXQoKS50b3AgLSA5NTtcbiAgICAgICAgICAgIGlzX21vYmlsZSA9ICQod2luZG93KS53aWR0aCgpIDw9IDY2NztcblxuICAgICAgICAgICAgaWYgKGFuaW1hdGUpIHtcbiAgICAgICAgICAgICAgICAkaGFzU2Nyb2xsLnN0b3AoKS5hbmltYXRlKHsgJ3Njcm9sbFRvcCc6IHRvcCB9LCAnbWVkaXVtJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJG5hdmlnYXRpb24ucmVtb3ZlQ2xhc3MoJ2lzLWRpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkaGFzU2Nyb2xsLnNjcm9sbFRvcCh0b3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuai1uYXZpZ2F0aW9uJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAkbmF2aWdhdGlvbi5hZGRDbGFzcygnaXMtZGlzYWJsZWQnKTtcbiAgICAgICAgc2Nyb2xsVG9BbmNob3IodGhpcy5oYXNoLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICRuYXZpZ2F0aW9uLmFkZENsYXNzKCdpcy1kaXNhYmxlZCcpO1xuICAgICAgICAgICAgc2Nyb2xsVG9BbmNob3Iod2luZG93LmxvY2F0aW9uLmhhc2gsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSwgNTApO1xuXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe1xuICAgICAgICBjaGFuZ2VJdGVtKCQod2luZG93KS5zY3JvbGxUb3AoKSlcbiAgICB9KTtcbn0pKGpRdWVyeSk7IiwiZnVuY3Rpb24geWFuZGV4TWFwKCkge1xuICAgIHltYXBzLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIFlNYXAsIG15UGxhY2VtYXJrO1xuICAgICAgICBcbiAgICAgICAgWU1hcCA9IG5ldyB5bWFwcy5NYXAoJ2xvY2F0aW9uLW1hcCcsIHtcbiAgICAgICAgICAgIGNlbnRlcjogWzQ1LjAzMDIwMywgMzguOTQwNDU3XSxcbiAgICAgICAgICAgIHpvb206IDE2LFxuICAgICAgICAgICAgY29udHJvbHM6IFsnem9vbUNvbnRyb2wnLCAnZnVsbHNjcmVlbkNvbnRyb2wnXVxuICAgICAgICB9KTtcblxuICAgICAgICBZTWFwLmJlaGF2aW9ycy5kaXNhYmxlKCdzY3JvbGxab29tJyk7XG4gICAgICAgIFlNYXAuY29udHJvbHMuZ2V0KCd6b29tQ29udHJvbCcpLm9wdGlvbnMuc2V0KCdzaXplJywgJ3NtYWxsJyk7XG4gICAgICAgIFlNYXAuY29udHJvbHMuZ2V0KCd6b29tQ29udHJvbCcpLm9wdGlvbnMuc2V0KCdwb3NpdGlvbicsIHsgcmlnaHQ6IDEwLCB0b3A6IDUwIH0pO1xuXG4gICAgICAgIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhZTWFwLmdldENlbnRlcigpLCB7fSwge1xuICAgICAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxuICAgICAgICAgICAgaWNvbkltYWdlSHJlZjogJy9pbWFnZXMvdmlub2dyYWQtbG9nby5wbmcnLFxuICAgICAgICAgICAgaWNvbkltYWdlU2l6ZTogWzE0MSwgMTQxXSxcbiAgICAgICAgICAgIGljb25JbWFnZU9mZnNldDogWy03MSwgLTcxXVxuICAgICAgICB9KTtcblxuICAgICAgICBZTWFwLmdlb09iamVjdHMuYWRkKG15UGxhY2VtYXJrKTtcbiAgICB9KTtcbn0iLCIoZnVuY3Rpb24oYm9keSl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgYXBwID0ge1xuXG4gICAgICAgIGluaXRNYXNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoXCIuai1waG9uZS1tYXNrXCIpLm1hc2soXCIrNyAoOTk5KSA5OTktOTktOTlcIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdFBvcHVwOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgICQucG9wdXAuaW5pdCgnLmpzLW9wZW4tcG9wdXAnLCB7XG4gICAgICAgICAgICAgICAgY3NzUG9zaXRpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyYXBwZXI6ICcubGF5b3V0LXdyYXBwZXInXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0RG9jdW1lbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmotbG9hZC1kb2N1bWVudHMnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vdGlvbiA9ICQodGhpcykuZGF0YSgnbW90aW9uJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAobW90aW9uID09ICdzaG93Jykge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRhdGEoJ21vdGlvbicsICdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNkb2N1bWVudHMnKS5maW5kKCcuaXMtbW90aW9uJykucmVtb3ZlQ2xhc3MoJ2lzLWhpZGRlbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCdtb3Rpb24nLCAnc2hvdycpO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5zdG9wKCkuYW5pbWF0ZSh7ICdzY3JvbGxUb3AnOiAkKCcjZG9jdW1lbnRzLWFuY2hvcicpLm9mZnNldCgpLnRvcCB9LCAnZmFzdCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNkb2N1bWVudHMnKS5maW5kKCcuaXMtbW90aW9uJykuYWRkQ2xhc3MoJ2lzLWhpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnBhZ2UtYnV0dG9uJykudG9nZ2xlQ2xhc3MoJ19kb3duJykudG9nZ2xlQ2xhc3MoJ191cCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdEJsb2NrOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICQoc2VsZWN0b3IpLm1hZ25pZmljUG9wdXAoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgICAgICAgZGVsZWdhdGU6ICdhLnpvb20nLFxuICAgICAgICAgICAgICAgIGNsb3NlT25Db250ZW50Q2xpY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgY2xvc2VCdG5JbnNpZGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGZpeGVkQ29udGVudFBvczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtYWluQ2xhc3M6ICdtZnAtbm8tbWFyZ2lucyBtZnAtd2l0aC16b29tJyxcbiAgICAgICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbEZpdDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2FsbGVyeToge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOnRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0Wm9vbTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB0aGlzLmluaXRCbG9jaygnLmotZ2FsbGVyeScpO1xuICAgICAgICAgICAgdGhpcy5pbml0QmxvY2soJy5qLXRpbWVsaW5lJyk7XG4gICAgICAgICAgICB0aGlzLmluaXRCbG9jaygnLmotZG9jdW1lbnRzJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0VGFiczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5qLXRhYicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2N1cnJlbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFiID0gJCh0aGlzKS5hdHRyKCdocmVmJykuc3Vic3RyKDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlciA9ICQodGhpcykuZGF0YSgnd3JhcHBlcicpO1xuXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmotdGFiLWNsb3Nlc3QnKS5maW5kKCcuY3VycmVudCcpLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJyN0YWItJyArIHdyYXBwZXIpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtcyA9ICQoJyN0YWItJyArIHdyYXBwZXIpLmZpbmQoJy5pcy1pdGVtJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtcy5yZW1vdmVDbGFzcygnaXMtc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW1zLmZpbHRlcignLicgKyB0YWIpLmFkZENsYXNzKCdpcy1zaG93Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdjdXJyZW50Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRDYXJvdXNlbDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICQoJy5qLWNhcm91c2VsJykuc2xpY2soe1xuICAgICAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGluZmluaXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzcGVlZDogMjU5LFxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogNCxcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICAgICAgICAgICAgICBwcmV2QXJyb3c6ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNhcm91c2VsX19uYXZpZ2F0aW9uIF9wcmV2IHNsaWNrLXByZXZcIj48L2J1dHRvbj4nLFxuICAgICAgICAgICAgICAgIG5leHRBcnJvdzogJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2Fyb3VzZWxfX25hdmlnYXRpb24gX25leHQgc2xpY2stbmV4dFwiPjwvYnV0dG9uPicsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiAxMDI0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90czogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA2MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA0ODAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBpbml0U2xpZGVyOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgJCgnLmotc2xpZGVyJykuc2xpY2soe1xuICAgICAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGluZmluaXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmYWRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNwZWVkOiA3MDAsXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICAgICAgICAgIHByZXZBcnJvdzogJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYWJvdXRfX3NsaWRlcl9fbmF2aSBfcHJldiBzbGljay1wcmV2XCI+PC9idXR0b24+JyxcbiAgICAgICAgICAgICAgICBuZXh0QXJyb3c6ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImFib3V0X19zbGlkZXJfX25hdmkgX25leHQgc2xpY2stbmV4dFwiPjwvYnV0dG9uPidcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdFN3aXRjaGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkc2xpZGVyID0gJCgnI3NsaWRlcicpLCB0aW1lb3V0ID0gNjAwMDtcblxuICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjaGFuZ2UnLCAnLmotc3dpdGNoZXInLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHZhciBkYXl0aW1lID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgICAgICAkc2xpZGVyLmZpbmQoJy5qLXNsaWRlci1pdGVtLl9hY3RpdmUnKS5hZGRDbGFzcygnX2xhc3QtYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAkc2xpZGVyLmZpbmQoJy5qLXNsaWRlci1pdGVtLl9hY3RpdmUnKS5yZW1vdmVDbGFzcygnX2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICRzbGlkZXIuZmluZCgnLmotc2xpZGVyLWl0ZW0nKS5maWx0ZXIoJ1tkYXRhLWRheXRpbWU9XCInICsgZGF5dGltZSArICdcIl0nKS5hZGRDbGFzcygnX2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAkc2xpZGVyLmZpbmQoJy5qLXNsaWRlci1pdGVtLl9sYXN0LWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdfbGFzdC1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5qLXNsaWRlci1uYXZpZ2F0aW9uJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gJCh0aGlzKS5kYXRhKCdkaXJlY3Rpb24nKTtcblxuICAgICAgICAgICAgICAgIHZhciAkZ3JvdXAgPSAkc2xpZGVyLmZpbmQoJy5qLXNsaWRlci1pdGVtLl9hY3RpdmUnKSxcbiAgICAgICAgICAgICAgICAgICAgX2NvdW50ID0gJGdyb3VwLmZpbmQoJy5qLXNsaWRlci1pbWFnZScpLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICAgICAgICAgIF9pbmRleCA9ICRncm91cC5maW5kKCcuai1zbGlkZXItaW1hZ2UuX2FjdGl2ZScpLmluZGV4KCksXG4gICAgICAgICAgICAgICAgICAgIF9uZXh0ID0gMDtcblxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gJ3ByZXYnKSB7XG4gICAgICAgICAgICAgICAgICAgIF9uZXh0ID0gX2luZGV4IC0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09ICduZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICBfbmV4dCA9IF9pbmRleCArIDE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKF9uZXh0ID4gX2NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIF9uZXh0ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKF9uZXh0IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBfbmV4dCA9IF9jb3VudDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkZ3JvdXAuZmluZCgnLmotc2xpZGVyLWltYWdlLl9hY3RpdmUnKS5hZGRDbGFzcygnX2xhc3QtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJGdyb3VwLmZpbmQoJy5qLXNsaWRlci1pbWFnZS5fYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ19hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkZ3JvdXAuZmluZCgnLmotc2xpZGVyLWltYWdlJykuZXEoX25leHQpLmFkZENsYXNzKCdfYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICRncm91cC5maW5kKCcuai1zbGlkZXItaW1hZ2UuX2xhc3QtYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ19sYXN0LWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJCgnI3NsaWRlci1uZXh0JykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRQbGFuczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJHBvcHVwID0gbnVsbDtcblxuICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuai1wbGFucy1sYXlvdXQnLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIGltYWdlID0gJCh0aGlzKS5hdHRyKCdocmVmJyksXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlID0gJCh0aGlzKS5hdHRyKCd0aXRsZScpO1xuXG4gICAgICAgICAgICAgICAgJHBvcHVwID0gJCh0ZW1wbGF0ZSgndG1wbC1wb3B1cC1sYXlvdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAnaW1hZ2UnOiBpbWFnZVxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICRwb3B1cC5hZGRDbGFzcygndGVtcCcpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJHBvcHVwKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAkLnBvcHVwLnNob3coJHBvcHVwLCBmYWxzZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdE1hc2soKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFRhYnMoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFpvb20oKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFBsYW5zKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRQb3B1cCgpO1xuICAgICAgICAgICAgdGhpcy5pbml0U2xpZGVyKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRTd2l0Y2hlcigpO1xuICAgICAgICAgICAgdGhpcy5pbml0Q2Fyb3VzZWwoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdERvY3VtZW50cygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFwcC5pbml0KCk7XG59KShkb2N1bWVudC5ib2R5KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

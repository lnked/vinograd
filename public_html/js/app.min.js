var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},app=app||{};!function(t){"use strict";app={_extend:function(t,e){if(void 0!==e)for(var i in e)t[i]=e[i];return t},bind:function(){for(var t in this)"object"==_typeof(this[t])&&void 0!==this[t].init&&"function"==typeof this[t].init&&this[t].init()},init:function(){this.bind()}}}(document),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},app=app||{},function(t){"use strict";var e,i=$(t);(app.ajaxForm={config:{form_class:".form-ajax",form_reset:"form-reset",link_class:".js-request-link",error_class:"error",error_message:"form__error-message",error_message_class:"j-error-message",error_message_addclass:"show",form_label:".form__wrapper",checkbox_label:"checkbox__label"},callback_stack:{},extend:function(t){if(e=this,void 0!==t){var i;for(i in t)void 0!==e.config[i]&&(e.config[i]=t[i])}},default_handler:function(t,i){if(e=this,i.status)i.hasOwnProperty("redirect_url")&&(window.location.href=i.redirect_url);else if(void 0!==i.errors||void 0!==i.error_message){var n;void 0!==i.errors&&(n=i.errors),void 0!==i.error_message&&i.error_message,e.validation(t,n,i.error_message)}i.hasOwnProperty("open_popup")&&($("body").find(".popup.is-open").length?$.popup.close($("body").find(".popup.is-open"),function(){$.popup.open(i.open_popup)}):$.popup.open(i.open_popup)),i.hasOwnProperty("message")&&$.popup.message(i.title,i.message)},validation:function(t,i,n){e=this,t.find("."+e.config.error_class).removeClass(e.config.error_class),t.find("."+e.config.error_message).remove(),t.find("."+e.config.error_message_class).removeClass(e.config.error_message_addclass);var o,a;setTimeout(function(){if(void 0!==n&&""!==n&&(t.find("."+e.config.error_message_class).html(n),t.find("."+e.config.error_message_class).addClass(e.config.error_message_addclass)),void 0!==i&&""!==i)for(o in i)t.find('input[name="'+o+'"]').length>0&&(a=t.find('input[name="'+o+'"]')),t.find('select[name="'+o+'"]').length>0&&(a=t.find('select[name="'+o+'"]')),t.find('textarea[name="'+o+'"]').length>0&&(a=t.find('textarea[name="'+o+'"]')),a.closest("."+e.config.checkbox_label).length>0&&(a=a.closest("."+e.config.checkbox_label)),void 0!==a&&(a.addClass(e.config.error_class),a.closest(e.config.form_label).append('<div class="'+e.config.error_message+'">'+i[o]+"</div>"))},10)},upload:function(){e=this,i.on("submit",".form-file-upload",function(t){return AIM.submit(this,{onStart:function(){},onComplete:function(t){"object"===(void 0===t?"undefined":_typeof(t))&&!0===t.status&&t.hasOwnProperty("photo_url")}})}),$(document).on("change",".upload_button_onchange",function(){$(this).closest(".upload_button").find(".upload_button_field").length>0&&$(this).closest(".upload_button").find(".upload_button_field").html($(this).val())})},send:function(t,e,i,n,o){"function"!=typeof n&&(n=function(){}),"function"!=typeof o&&(o=function(){});try{$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:t,type:e,data:i,contentType:!1,processData:"get"==e.toLowerCase(),success:n,error:o,dataType:"JSON"})}catch(t){}},initLink:function(){e=this,i.on("click",e.config.link_class,function(t){var i,n,o,a;t.preventDefault?t.preventDefault():t.returnValue=!1,(i=$(this)).data("is-busy")||(i.data("is-busy",!0),n=$(this).attr("href")||$(this).data("action"),o=$(this).data("method")||"get",a={},e.send(n,o,a,function(t){i.data("callback")&&e.callback_stack.hasOwnProperty(i.data("callback"))?e.callback_stack[i.data("callback")](i,t):e.default_handler(i,t),i.data("is-busy",!1)},function(t){e.default_handler(i,t),i.data("is-busy",!1)}))})},initForm:function(){e=this,i.on("submit",e.config.form_class,function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var i=$(this),n=i.attr("action"),o=i.attr("method")||"post",a=window.FormData?new FormData(i[0]):i.serialize();if(!i.data("is-busy")){if(i.data("is-busy",!0),"undefined"!=typeof button&&(button.data("loading")&&(button.data("original",button.text()),button.text(button.data("loading"))),button.addClass("preload")),i.data("precallback")&&e.callback_stack.hasOwnProperty(i.data("precallback"))&&!e.callback_stack[i.data("precallback")](i))return!1;e.send(n,o,a,function(t){i.data("callback")&&e.callback_stack.hasOwnProperty(i.data("callback"))?e.callback_stack[i.data("callback")](i,t):e.default_handler(i,t),!0===t.status&&i.hasClass(e.config.form_reset)&&(i.find("."+e.config.error_class).removeClass(e.config.error_class),i.get(0).reset()),"undefined"!=typeof button&&(button.data("original")&&button.text(button.data("original")),button.removeClass("preload")),i.data("is-busy",!1)},function(t){e.default_handler(i,t),i.data("is-busy",!1)})}})},init:function(t){this.extend(t),this.initForm(),this.initLink()}}).init()}(document.body),app=app||{},function(t){"use strict";app.documents={trigger:function(){$("body").on("click",".j-load-documents",function(t){"show"==$(this).data("motion")?($(this).data("motion","hide"),$("#documents").find(".is-motion").removeClass("is-hidden")):($(this).data("motion","show"),$("html, body").stop().animate({scrollTop:$("#documents-anchor").offset().top},"fast"),setTimeout(function(){$("#documents").find(".is-motion").addClass("is-hidden")},200)),$(this).closest(".page-button").toggleClass("_down").toggleClass("_up")})},init:function(){this.trigger()}}}(document),app=app||{},function(t){"use strict";app.gallery={fancybox:function(t){var e,i,n,o,a,s={helpers:{overlay:{locked:!1},title:{type:"inside"},buttons:{}},width:"650px",height:"650px",autoPlay:!1,slideshow:!0,transition:"none"};if(void 0!==t&&$(t).length)for(n="",o=(i=[".j-gallery",".j-timeline",".j-documents",".j-floors",".j-plans"]).length-1;o>=0;o--)n=Math.random(),(e=$(i[o]).find(".zoom")).prop("rel","gallery-"+n),a=Object.assign(s,{rel:"gallery-"+n}),e.fancybox(a);else $(".zoom").fancybox(s);$(".j-pinch-trigger").fancybox(s)},init:function(){this.fancybox()}}}(document),app=app||{},function(t){"use strict";app.goals={trigger:function(){$("body").on("click",".j-yandex-goal",function(){$(this).data("target-name")&&$.each($(this).data("target-name").split(" "),function(t,e){yaCounter38867515.reachGoal($.trim(e))})})},init:function(){this.trigger()}}}(document),app=app||{},function(t){"use strict";app.location={trigger:function(){var t=$("#location-mobile"),e=null,i=0;t.find(".j-close").on("click",function(){t.addClass("is-disabled"),(e=t.find(".j-content")).removeClass("_animate"),setTimeout(function(){e.removeClass("_active"),t.addClass("is-hidden").removeClass("is-disabled")},300)}),$("body").on("click",".j-loc-flag",function(){t.removeClass("is-hidden"),(e=t.find(".j-content")).find(".j-content-middle").html($(this).closest(".location__item").find(".location__item__content").html()),e.addClass("_active"),i=$(this).data("number"),t.removeClass("_num-1 _num-2 _num-3 _num-4 _num-5 _num-6").addClass("_num-"+i),setTimeout(function(){e.addClass("_animate")},10)})},init:function(){}}}(document),app=app||{},function(t){"use strict";app.mask={phone:function(t){document.querySelectorAll(t).length&&$(t).each(function(){new Cleave($(this),{phone:!0,phoneRegionCode:"ru"})})},init:function(){var t=this;t.phone(".j-phone-mask"),$("body").on("popup.after_open",function(e,i){setTimeout(function(){t.phone(".j-phone-mask")},50)})}}}(document),app=app||{},function(t){"use strict";app.plans={trigger:function(){var t=null;$("body").on("click",".j-plans-layout",function(e){e.preventDefault();var i=$(this).attr("href"),n=$(this).attr("title");return t=$(template("tmpl-popup-layout",{title:n,image:i})),t.addClass("temp"),$("body").append(t),$.popup.show(t,!1,!0),!1})},init:function(){this.trigger()}}}(document),app=app||{},function(t){"use strict";app.popup={init:function(){$.popup.init(".js-open-popup",{hashChange:!1,cssPosition:!1,wrapper:".layout-wrapper"})}}}(document),app=app||{},function(t){"use strict";var e;app.sandwich={config:{keyHooks:!1,selector:".js-sandwich-menu",wrapper:".layout-wrapper",overlay:"#menu-overlay"},extend:function(t){if(e=this,void 0!==t){var i;for(i in t)void 0!==e.config[i]&&(e.config[i]=t[i])}},isOpen:function(){return $("body").hasClass("page-visible")},hide:function(){$("body").removeClass("page-open"),setTimeout(function(){$("body").removeClass("page-visible")},10),$(this.config.overlay).css({visibility:"hidden"})},toggle:function(){$("body").hasClass("page-visible")?($("body").removeClass("page-open"),setTimeout(function(){$("body").removeClass("page-visible")},200)):($("body").addClass("page-open"),setTimeout(function(){$("body").addClass("page-visible")},10));var t="visible";$("body").hasClass("page-open")||(t="hidden"),$(e.config.overlay).css({visibility:t})},sandwichTrigger:function(){(e=this).config.keyHooks&&$("body").on("keydown",function(t){27==t.keyCode&&e.isOpen()&&e.toggle()}),$("body").on("click",e.config.selector,function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,e.toggle()})},overlayTrigger:function(){e=this,$("body").on("click",e.config.overlay,function(t){e.hide()})},init:function(){this.extend({keyHooks:!0,selector:".js-sandwich-menu",wrapper:".layout-wrapper",overlay:"#menu-overlay"}),this.sandwichTrigger(),this.overlayTrigger()}}}(document),app=app||{},function(t){"use strict";app.scroll={init:function(){$("html").scrollWithEase({stepSize:100,animationTime:1e3})}}}(document),app=app||{},function(t){"use strict";app.show={trigger:function(){$("body").on("click",".j-show",function(t){t.preventDefault();var e=$(this).attr("href");return $(e).length&&$(e).addClass("is-show"),$(this).hide(),!1})},init:function(){this.trigger()}}}(document),app=app||{},function(t){"use strict";app.slider={trigger:function(){$(".j-slider").slick({dots:!1,infinite:!0,draggable:!0,fade:!0,speed:700,slidesToShow:1,slidesToScroll:1,prevArrow:'<button type="button" class="about__slider__navi _prev slick-prev"></button>',nextArrow:'<button type="button" class="about__slider__navi _next slick-next"></button>'})},init:function(){this.trigger()}}}(document),app=app||{},function(t){"use strict";app.switcher={trigger:function(){function t(){return clearInterval(o),setInterval(function(){$("#slider-next").trigger("click")},n)}function e(t){clearInterval(t)}var i=$("#slider"),n=6e3,o=null;$("body").on("change",".j-switcher",function(){var t=$(this).val();i.find(".j-slider-item._active").addClass("_last-active"),i.find(".j-slider-item._active").removeClass("_active"),i.find(".j-slider-item").filter('[data-daytime="'+t+'"]').addClass("_active"),setTimeout(function(){i.find(".j-slider-item._last-active").removeClass("_last-active")},1e3)}),o=t(),$("body").on("click",".j-slider-navigation",function(){var n,a,s,r,c=$(this).data("direction");e(o),a=(n=i.find(".j-slider-item._active")).find(".j-slider-image").length-1,s=n.find(".j-slider-image._active").index(),r=0,"prev"==c?r=s-1:"next"==c&&(r=s+1),r>a&&(r=0),0>r&&(r=a),n.find(".j-slider-image._active").addClass("_last-active"),n.find(".j-slider-image._active").removeClass("_active"),n.find(".j-slider-image").eq(r).addClass("_active"),setTimeout(function(){n.find(".j-slider-image._last-active").removeClass("_last-active"),o=t()},1e3)})},init:function(){this.trigger()}}}(document),app=app||{},function(t){"use strict";app.tabs={trigger:function(){$("body").on("click",".j-tab",function(t){var e,i,n,o,a;return t.preventDefault(),$(this).hasClass("current")||(e=$(this).attr("href").substr(2),i=$(this).data("wrapper"),$(this).closest(".j-tab-closest").find(".current").removeClass("current"),$("#tab-"+i).length&&((n=$("#tab-"+i).find(".is-item")).removeClass("is-show"),n.filter("."+e).addClass("is-show")),$(this).addClass("current"),o=$(this).closest(".j-tabs-cover"),(a=o.find(".j-tabs-content")).hasClass("active")&&(a.removeClass("animate"),setTimeout(function(){a.removeClass("active")},300))),!1}),$("body").on("click",".j-tabs-trigger",function(){var t,e=$(this).closest(".j-tabs-cover");e.length&&((t=e.find(".j-tabs-content")).hasClass("active")?(t.removeClass("animate"),setTimeout(function(){t.removeClass("active")},300)):(t.addClass("active"),setTimeout(function(){t.addClass("animate")},10)))})},init:function(){this.trigger()}}}(document),app=app||{},function(t){"use strict";app.timeline={data:{},filter:null,years:null,months:null,_initCarousel:function(){var t=$(window).width(),e=$("#timeline-carousel").find(".slick-slide").length;(t>768&&e>=4||t>568&&e>=3||t>375&&e>=2||375>t&&e>=1)&&$("#timeline-carousel").slick({lazyLoad:"ondemand",dots:!1,infinite:!1,draggable:!0,speed:259,slidesToShow:4,slidesToScroll:1,prevArrow:'<button type="button" class="carousel__navigation _prev slick-prev"></button>',nextArrow:'<button type="button" class="carousel__navigation _next slick-next"></button>',responsive:[{breakpoint:768,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:568,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:375,settings:{fade:!0,slidesToShow:1,slidesToScroll:1}}]})},_currentYear:function(){return parseInt(this.years.find(".is-current").data("value"))},_currentMonth:function(){return parseInt(this.months.find(".is-current").data("value"))},_handle:function(){var t=this;this.data.current=this._currentYear(),this.data.months=[],this.months.find(".j-timeline-months-item").each(function(e,i){var n,o=[],a=$(i).data("if")+"";if(void 0!==a&&""!==a){o=a.split(",");for(n in o)o[n]=parseInt(o[n])}t.data.months.push({item:i,year:o})})},_reinitCarousel:function(){var t,e=this,i=this._currentYear(),n=this._currentMonth();$("#timeline-carousel").hasClass("slick-initialized")&&$("#timeline-carousel").slick("unslick"),$("#timeline-carousel").html(""),t=$("#timeline-cache").find(".carousel__item.is-year-"+i+".is-month-"+n).length,$("#timeline-cache").find(".carousel__item.is-year-"+i+".is-month-"+n).each(function(i,n){var o=$(this).clone();$("#timeline-carousel").append(o),i+1==t&&setTimeout(function(){e._initCarousel()},50)}),setTimeout(function(){app.gallery.fancybox(".j-timeline-slider")},300)},_changeFirstMonth:function(){this.months.find(".j-timeline-months-item.is-active:first").trigger("click")},_match:function(){var t=this;this._handle(),this.months.find(".j-timeline-months-item").removeClass("is-active"),$.each(this.data.months,function(e,i){0>i.year.indexOf(t.data.current)||$(i.item).addClass("is-active")}),this.filter.addClass("is-active")},_events:function(){var t=this;this.years.find(".j-timeline-years-item").on("click",function(e){e.preventDefault(),$(this).hasClass("is-current")||($("#timeline-filter").find(".j-timeline-years").find(".is-current").removeClass("is-current"),$(this).addClass("is-current"),t._match(),t._changeFirstMonth(),t._reinitCarousel())}),this.months.find(".j-timeline-months-item").on("click",function(e){e.preventDefault(),$(this).hasClass("is-current")||($("#timeline-filter").find(".j-timeline-months").find(".is-current").removeClass("is-current"),$(this).addClass("is-current"),t._match(),t._reinitCarousel())})},init:function(){this.filter=$("#timeline-filter"),this.years=this.filter.find(".j-timeline-years"),this.months=this.filter.find(".j-timeline-months"),this._match(),this._events(),this._reinitCarousel()}}}(document),app=app||{},function(t){"use strict";app.yandex={drow:function(){ymaps.ready(function(){var t,e,i=667>=$(window).width();(t=new ymaps.Map("location-map",{center:[45.021188,38.926667],zoom:16,controls:["zoomControl","fullscreenControl"]})).behaviors.disable("multiTouch"),t.behaviors.disable("scrollZoom"),t.controls.get("zoomControl").options.set("size","small"),t.controls.get("zoomControl").options.set("position",{right:10,top:50}),i&&t.behaviors.disable("drag"),e=new ymaps.Placemark(t.getCenter(),{},{iconLayout:"default#image",iconImageHref:"/images/vinograd-logo.png",iconImageSize:[141,141],iconImageOffset:[-71,-71]}),t.geoObjects.add(e)})}}}(document),$(document).ready(function(){app.init()});